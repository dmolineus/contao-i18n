<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="netzmacht.contao_i18n.pages" type="collection">
            <parameter>i18n_regular</parameter>
        </parameter>
    </parameters>
    <services>
        <service id="netzmacht.contao_i18n.context_stack" class="Netzmacht\Contao\I18n\Context\ContextStack"/>

        <service id="netzmacht.contao_i18n.page_repository" class="Netzmacht\Contao\I18n\Model\Page\I18nPageRepository">
            <argument>%netzmacht.contao_i18n.pages%</argument>
            <argument type="service" id="netzmacht.contao_toolkit.repository_manager"/>
        </service>

        <service id="netzmacht.contao_i18n.service_factory"
                 class="Netzmacht\Contao\I18n\DependencyInjection\ServiceFactory"/>

        <service id="netzmacht.contao_i18n.contao.model_registry"
                 class="Contao\Model\Registry">
            <factory service="netzmacht.contao_i18n.service_factory" method="createModelRegistry"/>
        </service>

        <service id="netzmacht.contao_i18n.page_provider" class="Netzmacht\Contao\I18n\PageProvider\PageProvider"/>

        <service id="netzmacht.contao_18n.listeners.translate_page_url"
                 class="Netzmacht\Contao\I18n\EventListener\TranslatePageUrlListener"
                 public="true">
            <argument type="service" id="netzmacht.contao_i18n.page_repository"/>
            <argument type="service" id="netzmacht.contao_i18n.context_stack"/>
            <argument type="service" id="contao.framework"/>
            <tag name="contao.hook" hook="generateFrontendUrl"/>
        </service>

        <service id="netzmacht.contao_i18m.listeners.current_page"
                 class="Netzmacht\Contao\I18n\EventListener\CurrentPageListener" public="true">
            <argument type="service" id="netzmacht.contao_i18n.page_provider"/>
            <tag name="contao.hook" hook="getPageLayout"/>
        </service>

        <service id="netzmacht.contao_18n.listeners.translate_insert_tag"
                 class="Netzmacht\Contao\I18n\EventListener\TranslateInsertTagListener" public="true">
            <argument type="service" id="netzmacht.contao_i18n.page_repository"/>
            <argument type="service" id="netzmacht.contao_i18n.page_provider"/>
            <argument type="service" id="translator"/>
            <tag name="contao.hook" hook="replaceInsertTags" method="replace"/>
        </service>

        <service id="netzmacht.contao_i18n.listeners.page_status_icon"
                 class="Netzmacht\Contao\I18n\EventListener\PageStatusIconListener" public="true">
            <tag name="contao.hook" hook="getPageStatusIcon"/>
        </service>

        <service id="netzmacht.contao_i18n.listeners.context"
                 class="Netzmacht\Contao\I18n\EventListener\ContextListener" public="true">
            <argument type="service" id="netzmacht.contao_i18n.context_stack"/>
            <tag name="contao.hook" hook="isVisibleElement"/>
            <tag name="contao.hook" hook="getFrontendModule"/>
        </service>

        <service
                id="netzmacht.contao_i18n.listeners.searchable_i18n_regular_pages"
                class="Netzmacht\Contao\I18n\EventListener\SearchableI18nRegularPageUrlsListener"
                public="true">
            <argument type="service" id="database_connection"/>
            <argument type="service" id="netzmacht.contao_i18n.contao.model_registry"/>
            <tag name="contao.hook" hook="getSearchablePages"/>
        </service>

        <service
                id="netzmacht.contao_i18n.listeners.searchable_news"
                class="Netzmacht\Contao\I18n\EventListener\SearchableI18nNewsUrlsListener"
                public="true">
            <argument type="service" id="netzmacht.contao_i18n.page_repository"/>
            <tag name="contao.hook" hook="getSearchablePages"/>
        </service>

        <service
                id="netzmacht.contao_i18n.listeners.searchable_events"
                class="Netzmacht\Contao\I18n\EventListener\SearchableI18nEventUrlsListener"
                public="true">
            <argument type="service" id="netzmacht.contao_i18n.page_repository"/>
            <tag name="contao.hook" hook="getSearchablePages"/>
        </service>

        <service
                id="netzmacht.contao_i18n.listeners.searchable_faqs"
                class="Netzmacht\Contao\I18n\EventListener\SearchableI18nFaqUrlsListener"
                public="true">
            <argument type="service" id="netzmacht.contao_i18n.page_repository"/>
            <tag name="contao.hook" hook="getSearchablePages"/>
        </service>
    </services>
</container>
